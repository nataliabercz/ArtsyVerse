<!DOCTYPE html>
{% load static %}
{% load crispy_forms_tags %}
{% load define_action %}
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css' rel='stylesheet'>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <title>{% block title %}{{ title | default:'ArtsyVerse' }}{% endblock %}</title>
    <div class="container">
        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
            <a href="/"><img class="bi me-2" src="/media/logo.png" alt height=120></a>
            {% block navbar %}
            <div class="btn-group">
                {% for nav, ref in navbar.items %}
                {% if nav|slugify in request.get_full_path  %}
                {% define "btn-secondary" as button_type %}
                {% else %}
                {% define "btn-dark" as button_type %}
                {% endif %}
                <a class="btn {{ button_type }}" href="{{ ref }}">{{ nav }}</a>
                {% endfor %}
                {% if user.is_superuser and "/user" in request.get_full_path %}
                <div class="dropdown">
                    <button class="btn btn-warning dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Admin</button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" style="color:#EBDEF0" href="/user/admin/users">Users</a></li>
                        <li><a class="dropdown-item" style="color:#EBDEF0" href="/user/admin/classes">Classes</a></li>
                    </ul>
                </div>
                {% endif %}
            </div>
            {% endblock %}
            <div class="col-md-3 text-end">
                {% if user.is_authenticated %}
                {% if request.get_full_path == "/user/"  %}
                {% define "btn-secondary" as button_type %}
                {% else %}
                {% define "btn-dark" as button_type %}
                {% endif %}
                <div class="btn-group">
                    <a class="btn {{ button_type }}" href="/user">{{ user.first_name }}</a>
                    <a class="btn btn-info" href="/logout">Log Out</a>
                </div>
                {% else %}
                <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#login">Log In</button>
                <div class="modal fade" id="login" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Log In</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Log In"></button>
                            </div>
                            <form class="text-center mt-3" method="post" action="/login">
                                {% csrf_token %}
                                {{ login_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-info">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </header>
    </div>
</head>
<body class="d-flex flex-column min-vh-100" style="color:#EBDEF0;font-family:Candara">
{% block content %}
{% endblock %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
<br><br>
<footer class="mt-auto">
    <div class="container">
        {% block footer %}
        <span class="text-muted py-3 border-top">&copy; Copyright {% now 'Y' %} <b>ArtsyVerse</b>. All rights reserved.</span>
        {% endblock %}
    </div>
</footer>
</html>